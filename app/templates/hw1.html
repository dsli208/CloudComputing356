<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/tictactoe.css') }}">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

        <script>
               var name = '{{ name }}';

           </script>
    </head>
   <body>
            <script>
                console.log(name);
            </script>
           {% if date %}


            <h1>Hello {{ name }}, {{ date }}</h1>


            <table style="width:100%" border="1">

            <tr>
                <td> <div><button id="0" onclick="update_board(id)"></button> </div></td>
                <td> <div><button id="1" onclick="update_board(id)"></button> </div> </td>
                <td> <div><button id="2" onclick="update_board(id)"></button> </div> </td>
            </tr>
            <tr>
                <td> <div><button id="3" onclick="update_board(id)"></button> </div> </td>
                <td> <div><button id="4" onclick="update_board(id)"></button> </div> </td>
                <td> <div><button id="5" onclick="update_board(id)"></button> </div> </td>
            </tr>
            <tr>
                <td> <div><button id="6" onclick="update_board(id)"></button> </div> </td>
                <td> <div><button id="7" onclick="update_board(id)"></button> </div> </td>
                <td> <div><button id="8" onclick="update_board(id)"></button> </div> </td>
            </tr>
            </table>


           <script>
                function update_board(id) {
                    console.log(id);

                    $.ajax({
                        url: '/ttt/play/',
                        type: 'POST',
                        data: JSON.stringify({"grid_id": id}),
                        contentType: 'application/json; charset=utf-8',
                        success: function (response) {
                            alert(response.status);
                        },
                        error: function () {
                            alert("error");
                        }
                    });

                }
                function get_board() {
                    var props = JSON.parse('{{ grid }}');
                    for (i = 0; i < 9; i++) {
                        buttonid = i + "";
                        button = document.getElementById(buttonid);
                        button.value = grid['grid'][i];
                    }

                    if (grid['winner'] === 'X'){

                    }
                    else if (grid['winner'] === 'O') {
                        
                    }

                }

            </script>
           {% else %}
        <form action="/ttt" method="post">
           <p>Name <input type = "text" name = "name" /></p>
            <p><input type = "submit" value = "submit" /></p>
            </form>
          {% endif %}

   </body>
</html>
